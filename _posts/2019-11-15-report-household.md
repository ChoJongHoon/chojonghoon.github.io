---
title: "FE ê³¼ì œ - ê°€ê³„ë¶€ ë§Œë“¤ê¸°"
date: 2019-10-20 20:29:28 +0900
categories: react report household
---

ì˜¤ëŠ˜ì€ `React`ë¥¼ ì´ìš©í•˜ì—¬ í•™êµ Front-End ê³¼ì œë¥¼ í•´ë³´ë ¤ í•œë‹¤.

ì‚¬ì‹¤ êµìˆ˜ë‹˜ê»˜ì„œ ì•µê·¤ëŸ¬ í˜¹ì€ `XML`ì„ ì´ìš©í•˜ì—¬ ì œì‘í•˜ë¼ê³  í•˜ì…¨ëŠ”ë° `React`ë¥¼ ì´ìš©í•´ ë§Œë“¤ì–´ë„ ë˜ê² ëƒê³  ì—¬ì­¤ë³´ë‹ˆ ì±„ì í•˜ê¸° ì–´ë µë‹¤ê³  í•˜ì‹œë‹¤ê°€ ê³ ì‹¬ëì— ê°€ëŠ¥í•˜ë‹¤ê³  í•˜ì…¨ë‹¤. ~~êµìˆ˜ë‹˜ ê°ì‚¬í•©ë‹ˆë‹¤.ğŸ˜‚~~

ê·¸ë˜ì„œ ì›¬ë§Œí•˜ë©´ ìƒˆë¡œìš´ ê¸°ìˆ ì„ ë„ì…í•˜ì§€ ì•Šê³  `React` + `TypeScript` ì •ë„ë¡œë§Œ ì œì‘í•´ë³´ë ¤í•œë‹¤! (~~ì‚¬ì‹¤ `TypeScript`ë„ ë¹¼ì•¼í• ê±°ê°™ì§€ë§Œ ì´ì œ ë§‰ ë°°ìš°ëŠ” ì¤‘ì´ë¼ ë¹¼ê³ ì‹¶ì§€ì•Šë‹¤...~~)

# ìš”êµ¬ì‚¬í•­

![draft](/assets/images/report-household-draft.png)

1. ê°œë°œì€ ì•„ë˜ì˜ ë‘ ê°€ì§€ ë°©ë²• ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒ í•©ë‹ˆë‹¤.
   - `JavaScript` + `HTML` + `CSS`
   - ~~`XML` + `XSL`~~
2. ë¹¨ê°•ìƒ‰ ë°•ìŠ¤ì˜ ë‚´ìš©ì€ ê³„ì‚°í•©ë‹ˆë‹¤.
   - ê°œìˆ˜ : ë‚ ì§œë³„ êµ¬ì…í•œ ë¬¼ê±´ì˜ ìˆ˜
   - ì´ ì§€ì¶œ : ë‚ ì§œë³„ í’ˆëª© ê°€ê²©ì˜ í•©
   - ì”ì•¡ : `ë‚ ì§œë³„ ìˆ˜ì…` - `ì´ ì§€ì¶œ`
     > ë‹¨, ì”ì•¡ì´ ë§ˆì´ë„ˆìŠ¤ì¼ ê²½ìš° `2019/12/03`ì¼ì˜ ê²½ìš°ì²˜ëŸ¼ ë¹¨ê°•ìƒ‰ìœ¼ë¡œ `[ì ì]`ë¼ëŠ” í‘œì‹œì™€ ê¸ˆì•¡ì„ í‘œì‹œí•  ê²ƒ)
3. ê¸°íƒ€
   - ê¸ˆì•¡ë€ì€ ì²œì›ë‹¨ìœ„ í¸ì§‘
   - ê° í•­ëª©ì€ ì˜ˆì‹œ í™”ë©´ì²˜ëŸ¼ ì •ë ¬(ì¤‘ì•™, ì¢Œì¸¡, ìš°ì¸¡)
   - ë‚ ì§œë³„ë¡œ êµ¬ì…ì²˜ë³„ ë‚´ë¦¼ì°¨ë³„ ì •ë ¬í•˜ì—¬ í‘œì‹œ(ë°ì´í„°ëŠ” ë¬´ì‘ìœ„ ì…ë ¥)

ìœ„ ê¸°ëŠ¥ì„ ëª¨ë‘ êµ¬í˜„í•˜ê³  ì•„ì´ë””ì–´ë‚˜ ê¸°ëŠ¥ì´ ì¶”ê°€ ë˜ë©´ ì¶”ê°€ ì ìˆ˜ë¥¼ ì£¼ì‹ ë‹¤ê³  í•˜ì…¨ë‹¤. ë‚˜ê°™ì€ ê²½ìš°ì—ëŠ” ë¡œì»¬ìŠ¤í† ë¦¬ì§€ë¥¼ ì´ìš©í•˜ì—¬ ì¶”ê°€ ì‚­ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ë ¤í•œë‹¤!

# ê¸°ìˆ  ìŠ¤íƒ

- React
- TypeScript
- styled-components

`TypeScript`ëŠ” ê±°ì˜ ì‚¬ìš©í•´ë³¸ ì ì´ ì—†ì§€ë§Œ ì•ìœ¼ë¡œ ê³„ì† ì¨ë³´ë ¤ê³  í•œë‹¤

# ì„¤ê³„

**data.json**

```json
{
  "data": [
    {
      "date": "20191202",
      "income": 200000,
      "expenses": [
        {
          "name": "ë³¼íœ",
          "price": 1000,
          "place": "ì¸í•˜ë¬¸êµ¬"
        },
        {
          "name": "ì‹œê³„",
          "price": 100000,
          "place": "ì¸í•˜ê¸ˆë°©"
        },
        {
          "name": "ì±…",
          "price": 10000,
          "place": "ê³µë£¡ì„œì "
        },
        {
          "name": "ë…¸íŠ¸",
          "price": 10000,
          "place": "ì¸í•˜ë¬¸êµ¬"
        }
      ]
    },
    {
      "date": "20191201",
      "income": 300000,
      "expenses": [
        {
          "name": "ìš°ìœ ",
          "price": 6000,
          "place": "ì¸í•˜ìŠˆí¼"
        },
        {
          "name": "ê³¼ì",
          "price": 10000,
          "place": "ì¸í•˜ìŠˆí¼"
        },

        {
          "name": "ì½œë¼",
          "price": 1500,
          "place": "ì¸í•˜ìŠˆí¼"
        }
      ]
    },

    {
      "date": "20191203",
      "income": 2000000,
      "expenses": [
        {
          "name": "ì¸í˜•",
          "price": 10000,
          "place": "ì¸í•˜ìŠˆí¼"
        },
        {
          "name": "ê»Œ",
          "price": 100,
          "place": "ì¸í•˜ìŠˆí¼"
        },
        {
          "name": "CD",
          "price": 5000,
          "place": "ì‹ ë‚˜ë¼ë ˆì½”ë“œ"
        },
        {
          "name": "ëª¨ë‹ˆí„°",
          "price": 105000,
          "place": "ì»´í“¨í„°ì„¸ìƒ"
        },
        {
          "name": "ë¹µ",
          "price": 1000,
          "place": "ë¹µì‹œì¥"
        },
        {
          "name": "ì½©ë‚˜ë¬¼",
          "price": 1000,
          "place": "ë™ë„¤ìŠˆí¼"
        },
        {
          "name": "ì»´í“¨í„°",
          "price": 2000000,
          "place": "ì»´í“¨í„°ì„¸ìƒ"
        }
      ]
    }
  ]
}
```

sort ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì–´ì•¼í•˜ë¯€ë¡œ ë°ì´í„°ì˜ ìˆœì„œëŠ” ë¬´ì‘ìœ„ë¡œ ì„ì–´ ì‘ì„±í•˜ì˜€ë‹¤.

## ì»´í¬ë„ŒíŠ¸ ë‚˜ëˆ„ê¸°

![components](/assets/images/report-household-components.png)

1. **<span style="color: #FF0000">Household(ë¹¨ê°„ìƒ‰)</span> :** ê°€ê³„ë¶€ í…Œì´ë¸”ì„ ê°ì‹¸ì¤ë‹ˆë‹¤.
2. **<span style="color: #FFC000">Daily(ì£¼í™©ìƒ‰)</span> :** í•˜ë£¨ì˜ ê°€ê³„ë¶€ë¥¼ ë³´ì—¬ì¤ë‹ˆë‹¤.
3. **<span style="color: #70309F">Expense(ë³´ë¼ìƒ‰)</span> :** í•˜ë‚˜ì˜ ì§€ì¶œì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

ì¼ë‹¨ì€ ì´ë ‡ê²Œ ì„¸ê°œì˜ ì»´í¬ë„ŒíŠ¸ë§Œ ìˆìœ¼ë©´ ë ê±°ê°™ë‹¤. `ì¶”ê°€`, `ì‚­ì œ` ê¸°ëŠ¥ì€ ë¨¼ì € ê¸°ë³¸ ê¸°ëŠ¥ì„ ë‹¤ êµ¬í˜„ í›„ ì¶”ê°€í•´ì£¼ë„ë¡ í•˜ì.

# êµ¬í˜„

## í”„ë¡œì íŠ¸ ìƒì„±

ë¨¼ì € `create-react-app`ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•´ì¤€ë‹¤.

```bash
$ create-react-app household --typescript
```

> `--typescript` ë¥¼ ì‚¬ìš©í•˜ë©´ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì ìš©ëœ ë¦¬ì•¡íŠ¸ ì•±ì´ ìƒì„±ëœë‹¤.

ê·¸ë¦¬ê³  `styled-components`ë¥¼ ì„¤ì¹˜í•œë‹¤.

```bash
$ yarn add styled-components

$ yarn add @types/styled-components
```

> `@types`ë¡œ ì‹œì‘í•˜ëŠ” íŒ¨í‚¤ì§€ëŠ” `TypeScript` ì–¸ì–´ì—ì„œ í•´ë‹¹ íŒ¨í‚¤ì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ í™•ì¥ íŒ¨í‚¤ì§€ì´ë‹¤.
>
> `JavaScript`ë¡œ ê°œë°œëœ íŒ¨í‚¤ì§€ëŠ” `TypeScript`ì—ì„œë„ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ `TypeScript`ë¡œ `declare` ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ê¸°ì¡´ì˜ íŒ¨í‚¤ì§€ë“¤ì€ `JavaScript`ë¡œ `export` ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— `TypeScript`ì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ ë°˜ë“œì‹œ `TypeScript`ì—ì„œ `declare` í•´ì£¼ì–´ì•¼ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

`src`í´ë”ë¥¼ ê¹”ë”í•˜ê²Œ ì •ë¦¬í–ˆë‹¤.

![src](/assets/images/report-household-src.png)

`lib` í´ë”ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ì•ˆì— `data.json`ì„ ë„£ì–´ì£¼ì—ˆë‹¤. ë¼ì´ë¸ŒëŸ¬ë¦¬ í´ë”ì—ëŠ” ê³µìš©ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ë“¤ì„ ë„£ì–´ì¤„ ê²ƒì´ë‹¤.

## Household ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ê¸°

`Household` ì»´í¬ë„ŒíŠ¸ëŠ” ë‹¨ìˆœíˆ ê°€ê³„ë¶€ tableì„ ê°ì‹¸ì£¼ëŠ” ì—­í• ì„ í•œë‹¤.

**src/components/Household.tsx**

```tsx
import React from "react";
import styled from "styled-components";

const Wrapper = styled.table`
  /* Todo: css ì¶”ê°€ */
`;

type HouseholdProps = {
  children: JSX.Element[];
};

export default function Household({ children }: HouseholdProps) {
  return (
    <Wrapper>
      <caption>ê°€ê³„ë¶€</caption>
      {children}
    </Wrapper>
  );
}
```

## Daily ì»´í¬ë„ŒíŠ¸ ì‘ì„±

`Daily` ì»´í¬ë„ŒíŠ¸ëŠ” ì§€ì¶œë“¤ì„ `children`ìœ¼ë¡œ ë°›ì•„ ë¿Œë ¤ì£¼ê³  í•˜ë£¨ë™ì•ˆì˜ í†µê³„ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤.

ë¨¼ì € Dailyì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•˜ê¸° ì „ì— ë‘ ê°€ì§€ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì¤„ ê²ƒì´ë‹¤.

1. **formatDate :** ë‚ ì§œí˜•ì‹ì„ ë³€í™˜í•´ì£¼ëŠ” í•¨ìˆ˜
   > ex) `20191116` -> `2019/11/16`
2. **formatMoney :** ê¸ˆì•¡ì€ ì²œì›ë‹¨ìœ„ë¡œ ì‰¼í‘œë¥¼ ì°ì–´ì£¼ëŠ” í•¨ìˆ˜
   > ex) `2000000` -> `2,000,000`

**src/lib/formatDate.ts**

```ts
const formatDate = (date: string): string => {
  const year = date.substr(0, 4);
  const month = date.substr(4, 2);
  const day = date.substr(6, 2);
  return year + "/" + month + "/" + day;
};

export default formatDate;
```

**src/lib/formatMoney.ts**

```ts
const formatMoney = (money: number): string =>
  money.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

export default formatMoney;
```

ì´ì œ `Daily` ì»´í¬ë„ŒíŠ¸ë¥¼ ì‘ì„±í•´ì£¼ì.

**src/componets/Daily.tsx**

```tsx
import React from "react";
import styled from "styled-components";
import formatDate from "../lib/formatDate";
import formatMoney from "../lib/formatMoney";

const IndexTd = styled.td`
  background: #0000ff;
  color: #ffffff;
`;

const GreenTd = styled.td`
  background: #00ff00;
  color: #000000;
  text-align: ${props => props.align};
`;

const LimeTd = styled.td`
  background: #bfff00;
  color: #000000;
  text-align: ${props => props.align};
`;

type DailyProps = {
  index: number;
  date: string;
  income: number;
  total: number;
  children: JSX.Element[];
};

export default function Daily({
  index,
  date,
  income,
  total,
  children
}: DailyProps) {
  return (
    <tbody>
      <tr>
        <IndexTd rowSpan={children.length + 5}>{index}</IndexTd>
        <GreenTd align="center">ë‚ ì§œ:{formatDate(date)}</GreenTd>
        <GreenTd align="center">ìˆ˜ì…</GreenTd>
        <GreenTd align="left" colSpan={2}>
          {formatMoney(income)}
        </GreenTd>
      </tr>
      <tr>
        <GreenTd align="center">ë²ˆí˜¸</GreenTd>
        <GreenTd align="center">í’ˆëª©</GreenTd>
        <GreenTd align="center">ê°€ê²©</GreenTd>
        <GreenTd align="center">êµ¬ì…ì²˜</GreenTd>
      </tr>
      {children}
      <tr>
        <LimeTd align="center">ê°œìˆ˜</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {children.length}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì´ì§€ì¶œ</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {formatMoney(total)}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì”ì•¡</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {formatMoney(income - total)}
        </LimeTd>
      </tr>
    </tbody>
  );
}
```

![tbody](https://i.stack.imgur.com/eLZvt.png)

`table` íƒœê·¸ë¥¼ ë³´ë‹¤ ì˜ë¯¸ì— ë§ëŠ” ì‹œë©˜í‹± ë§ˆí¬ ì—…ì„ í•˜ê¸° ìœ„í•´ `tbody`ë¥¼ ê¼­ ì¨ì¤€ë‹¤. (~~ì²˜ìŒì— ì•ˆì¨ì£¼ì—ˆë”ë‹ˆ `warnning` ë¿œë¿œí•˜ë”ë¼~~)

## Expense ì»´í¬ë„ŒíŠ¸ ì‘ì„±

`Expense` ì»´í¬ë„ŒíŠ¸ëŠ” í•˜ë‚˜ì˜ ì§€ì¶œ(row)ì„ ë³´ì—¬ì¤€ë‹¤.

í•˜ë‚˜ì˜ í•¨ìˆ˜ê°€ ë” í•„ìš”í•˜ë‹¤.

1. **formatRoman :** ìˆ«ìë¥¼ ë¡œë§ˆìˆ«ìë¡œ ë°”ê¿”ì¤€ë‹¤.
   > ex) `4` -> `IV`

**src/lib/formatRoman.ts**

```tsx
const formatRoman = (num: number): string => {
  let roman = "";
  const romanNumList: { [key: string]: number } = {
    M: 1000,
    CM: 900,
    D: 500,
    CD: 400,
    C: 100,
    XC: 90,
    L: 50,
    XV: 40,
    X: 10,
    IX: 9,
    V: 5,
    IV: 4,
    I: 1
  };
  let a;
  for (let key in romanNumList) {
    a = Math.floor(num / romanNumList[key]);
    if (a >= 0) {
      for (let i = 0; i < a; i++) {
        roman += key;
      }
    }
    num = num % romanNumList[key];
  }

  return roman;
};

export default formatRoman;
```

ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì´ìš©í•´ ë¡œë§ˆìˆ«ìë¡œ ë°”ê¾¸ëŠ” í•¨ìˆ˜ë¥¼ ê²€ìƒ‰í•´ì„œ ê°€ì ¸ì˜¤ê³ [(ì°¸ì¡°)](https://blog.usejournal.com/create-a-roman-numerals-converter-in-javascript-a82fda6b7a60) TypeScriptì— ë§ê²Œ ì¡°ê¸ˆ ë°”ê¿”ì£¼ì—ˆë‹¤.

ì´ì œ `Expense`í•¨ìˆ˜ë¥¼ ì‘ì„±í•´ì£¼ì.

**src/components/Extense.tsx**

```tsx
import React from "react";
import styled from "styled-components";
import formatRoman from "../lib/formatRoman";
import formatMoney from "../lib/formatMoney";

const YellowTd = styled.td`
  background: #ffff00;
  color: #000000;
  text-align: ${props => props.align};
`;

type ExpenseProps = {
  index: number;
  name: string;
  price: number;
  place: string;
};

export default function Expense({ index, name, price, place }: ExpenseProps) {
  return (
    <tr>
      <YellowTd align="center">{formatRoman(index)}.</YellowTd>
      <YellowTd align="left">{name}</YellowTd>
      <YellowTd align="left">{formatMoney(price)}</YellowTd>
      <YellowTd align="left">{place}</YellowTd>
    </tr>
  );
}
```

## ì‘ì„±í•œ ì»´í¬ë„ŒíŠ¸ë“¤ App ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©í•˜ê¸°

ì´ì œ ì—´ì‹¬íˆ ë§Œë“¤ì–´ì¤€ ì»´í¬ë„ŒíŠ¸ë“¤ì„ `App`ì—ì„œ ë¿Œë ¤ë³´ì.

**src/App.tsx**

```tsx
import React from "react";
import { data } from "./lib/data.json";

// components
import Household from "./components/Household";
import Daily from "./components/Daily";
import Expense from "./components/Expense";

function App() {
  return (
    <div>
      <Household>
        {data.map((daily, idx) => (
          <Daily
            key={idx}
            index={idx + 1}
            date={daily.date}
            income={daily.income}
            total={daily.expenses.reduce((acc, cur) => acc + cur.price, 0)}
          >
            {daily.expenses.map((expense, idx) => (
              <Expense
                key={idx}
                index={idx + 1}
                name={expense.name}
                price={expense.price}
                place={expense.place}
              ></Expense>
            ))}
          </Daily>
        ))}
      </Household>
    </div>
  );
}

export default App;
```

![view1](/assets/images/report-household-view1.png)

ì´ë ‡ê²Œ ë·°ê°€ ë‚˜ì™”ë‹¤! í•˜ì§€ë§Œ ì•„ì§ ê°ˆ ê¸¸ì´ ë©€ë‹¤.(~~ëª»ìƒê²¼ë‹¤.~~)

ë‚¨ì€ í•  ì¼ ëª©ë¡

1. ì”ì•¡ ë§ˆì´ë„ˆìŠ¤ì¼ ê²½ìš° ë¹¨ê°„ìƒ‰ìœ¼ë¡œ `[ì ì]` í‘œì‹œ
2. ë‚ ì§œë³„ êµ¬ì…ì²˜ë³„ ì •ë ¬
3. `ì¶”ê°€`, `ì‚­ì œ` ê¸°ëŠ¥ ì¶”ê°€
4. `local storage` ì—°ë™
5. ~~ë””ìì¸ ìˆ˜ì •...?~~

## ì”ì•¡ ë§ˆì´ë„ˆìŠ¤ í‘œì‹œ

ì´ë²ˆ ì‘ì—…ì€ `Daily` ì»´í¬ë„ŒíŠ¸ë§Œ ì‘ì—…í•´ì£¼ë©´ ëœë‹¤.

styled componentsì— `minus`ë¼ëŠ” `props`ë¥¼ `boolean` íƒ€ì…ìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ css ì‘ì—…ì„ í•´ì¤„ ê²ƒì´ë‹¤.

**src/components/Daily.tsx**

```tsx
(... ìƒëµ)

const LimeTd = styled.td`
  background: #bfff00;
  color: ${props => (props.minus ? "#FF0000" : "#000000")};
  text-align: ${props => props.align};
`;

(...ìƒëµ)

return (
    <tbody>
      <tr>
        <IndexTd rowSpan={children.length + 5}>{index}</IndexTd>
        <GreenTd align="center">ë‚ ì§œ:{formatDate(date)}</GreenTd>
        <GreenTd align="center">ìˆ˜ì…</GreenTd>
        <GreenTd align="left" colSpan={2}>
          {formatMoney(income)}
        </GreenTd>
      </tr>
      <tr>
        <GreenTd align="center">ë²ˆí˜¸</GreenTd>
        <GreenTd align="center">í’ˆëª©</GreenTd>
        <GreenTd align="center">ê°€ê²©</GreenTd>
        <GreenTd align="center">êµ¬ì…ì²˜</GreenTd>
      </tr>
      {children}
      <tr>
        <LimeTd align="center">ê°œìˆ˜</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {children.length}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì´ì§€ì¶œ</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {formatMoney(total)}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì”ì•¡</LimeTd>
        <LimeTd align="left" colSpan={3} minus={income < total}>
          {income < total ? "[ì ì]" : null}
          {formatMoney(income - total)}
        </LimeTd>
      </tr>
    </tbody>
  );

(...ìƒëµ)
```

ì´ë ‡ê²Œ í•´ì£¼ë‹ˆ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì—ëŸ¬ê°€ ë‚œë‹¤.

![minus-error](/assets/images/report-household-minus-error.png)

`td`ì—ëŠ” `minus`ë¼ëŠ” `props`ë¥¼ ì¤„ ìˆ˜ ì—†ë‹¤ëŠ” ì—ëŸ¬ì¸ë“¯ í•˜ë‹¤.

**src/components/Daily.tsx**

```tsx
(...ìƒëµ)

type LimeTdPropsType = {
  minus?: boolean;
};

const LimeTd = styled.td<LimeTdPropsType>`
  background: #bfff00;
  color: ${props => (props.minus ? "#FF0000" : "#000000")};
  text-align: ${props => props.align};
`;

(...ìƒëµ)
```

ë‹¤ìŒê³¼ ê°™ì´ íƒ€ì…ì„ ì •ì˜í•´ì£¼ê³  `styled.td`ì— `Generic`ìœ¼ë¡œ ë¶€ì—¬í•´ì£¼ë©´ ì—ëŸ¬ê°€ ì‚¬ë¼ì§„ë‹¤.

![view2](/assets/images/report-household-view2.png)

ì›í•˜ëŠ” ëŒ€ë¡œ ê²°ê³¼ê°€ ë‚˜ì™”ë‹¤.

## ë‚ ì§œë³„, êµ¬ì…ì²˜ë³„ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬

ìë°”ìŠ¤í¬ë¦½íŠ¸ ë‚´ì¥ í•¨ìˆ˜ì¸ `sort`ë¥¼ ì´ìš©í•´ ì •ë ¬ì„ í•´ì¤„ ê²ƒì´ë‹¤.

ì •ë ¬í•  ê¸°ì¤€ì´ ìˆ«ìì˜€ë‹¤ë©´ ì•„ë˜ì™€ ê°™ì´ ë§ˆì´ë„ˆìŠ¤ ì—°ì‚°ì„ í•´ì£¼ë©´ ëœë‹¤.

```js
data.sort((a, b) => a.date - b.date);
```

ë‚ ì©Œì™€ êµ¬ì…ì²˜ ëª¨ë‘ ë¬¸ìì—´ì´ê¸° ë•Œë¬¸ì— ë§ˆì´ë„ˆìŠ¤ ì—°ì‚°ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ì§€ë§Œ ë¹„êµ ì—°ì‚°ì€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì´ëŸ° ì‹ìœ¼ë¡œ í•´ì£¼ë©´ ëœë‹¤.

```js
data.sort((a, b) => {
  if (a.date > b.date) return 1;
  else if (b.date > a.date) return -1;
  else return 0;
});
```

**src/App.tsx**

```tsx
import React from "react";
import { data } from "./lib/data.json";

// components
import Household from "./components/Household";
import Daily from "./components/Daily";
import Expense from "./components/Expense";

function App() {
  const sortedData = data
    .sort((a, b) => {
      // ë‚ ì§œë³„ ì •ë ¬
      if (a.date > b.date) return 1;
      else if (b.date > a.date) return -1;
      else return 0;
    })
    .map(daily => {
      const sortedExpenses = daily.expenses.sort((a, b) => {
        // êµ¬ì…ì²˜ë³„ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        if (a.place > b.place) return -1;
        else if (b.place > a.place) return 1;
        else return 0;
      });
      return {
        ...daily,
        expenses: sortedExpenses
      };
    });

  return (
    <div>
      <Household>
        {sortedData.map((daily, idx) => (
          <Daily
            key={idx}
            index={idx + 1}
            date={daily.date}
            income={daily.income}
            total={daily.expenses.reduce((acc, cur) => acc + cur.price, 0)}
          >
            {daily.expenses.map((expense, idx) => (
              <Expense
                key={idx}
                index={idx + 1}
                name={expense.name}
                price={expense.price}
                place={expense.place}
              />
            ))}
          </Daily>
        ))}
      </Household>
    </div>
  );
}

export default App;
```

![view2](/assets/images/report-household-view3.png)

ì›í•˜ëŠ” ëŒ€ë¡œ ì •ë ¬ì´ ë˜ì—ˆë‹¤.

## ì¶”ê°€ ê¸°ëŠ¥ ë§Œë“¤ê¸°

ì˜¤ë¥¸ìª½ í™”ë©´ì— ì¶”ê°€ í¼ì„ ë§Œë“¤ ê²ƒì´ë‹¤. ë‚œ ë””ìì¸ ê°ê°ì´ ë¶€ì¡±í•˜ë‹ˆ [material-ui](https://material-ui.com/)ë¥¼ ì¨ì£¼ë„ë¡ í•˜ì.

ë¨¼ì € ì„¤ì¹˜ë¥¼ í•´ì¤˜ì•¼í•œë‹¤.

```bash
yarn add @material-ui/core

yarn add @material-ui/pickers
yarn add @date-io/date-fns
yarn add date-fns@next
yarn add date-fns
```

ì•„ë˜ìª½ ë„¤ê°œëŠ” ë‚ ì§œë¥¼ ì„ íƒí•˜ëŠ” í¼ì„ ìœ„í•´ ì„¤ì¹˜í•´ì£¼ì—ˆë‹¤.

ì´ì œ Form ì»´í¬ë„ŒíŠ¸ë¥¼ ìƒì„±í•´ë³´ì.

**src/components/Form.tsx**

```tsx
import React, { useState } from "react";
import DateFnsUtils from "@date-io/date-fns";
import koLocale from "date-fns/locale/ko";
import {
  MuiPickersUtilsProvider,
  KeyboardDatePicker
} from "@material-ui/pickers";
import { TextField, InputAdornment, Button } from "@material-ui/core";
import { createStyles, makeStyles, Theme } from "@material-ui/core/styles";
import styled from "styled-components";

const Wrapper = styled.div`
  flex: 1;
  text-align: center;
`;

const useStyles = makeStyles((theme: Theme) =>
  createStyles({
    textField: {
      maxWidth: 300
    },
    button: {
      marginTop: theme.spacing(3),
      maxWidth: 300
    }
  })
);

type Data = {
  date: string;
  income: number;
  expenses: {
    name: string;
    price: number;
    place: string;
  }[];
}[];

type FormProps = {
  data: Data;
  setData: (data: Data) => void;
};

export default function Form({ data, setData }: FormProps) {
  const [date, setDate] = useState<Date | null>(new Date());
  const [name, setName] = useState("");
  const [price, setPrice] = useState("");
  const [place, setPlace] = useState("");
  const classes = useStyles();

  const handleAdd = (): void => {
    if (!date) {
      // ì˜¤ë¥˜
      return;
    }
    if (isNaN(Number(price))) {
      // ì˜¤ë¥˜
      return;
    }

    const year = date.getFullYear().toString();
    const month = String(date.getMonth() + 1);
    const day = date.getDate().toString();

    const strDate =
      year + (month[1] ? month : "0" + month) + (day[1] ? day : "0" + day);

    const selectDataIndex = data.findIndex(daily => daily.date === strDate);

    if (selectDataIndex === -1) {
      setData([
        ...data,
        {
          date: strDate,
          income: 0,
          expenses: [
            {
              name,
              price: Number(price),
              place
            }
          ]
        }
      ]);
    } else {
      const filteredData = data.filter(daily => daily.date !== strDate);
      const selectData = data[selectDataIndex];
      selectData.expenses.push({ name, price: Number(price), place });
      setData([...filteredData, selectData]);
    }

    console.log(data);
    console.log(strDate);
  };

  return (
    <Wrapper>
      <MuiPickersUtilsProvider utils={DateFnsUtils} locale={koLocale}>
        <KeyboardDatePicker
          autoOk
          variant="inline"
          inputVariant="outlined"
          margin="normal"
          fullWidth
          className={classes.textField}
          format="yyyy/MM/dd"
          label="ë‚ ì§œ"
          value={date}
          onChange={(date: Date | null) => setDate(date)}
        />
      </MuiPickersUtilsProvider>
      <br />
      <TextField
        variant="outlined"
        margin="normal"
        fullWidth
        className={classes.textField}
        label="í’ˆëª©"
        value={name}
        onChange={e => setName(e.target.value)}
      />
      <br />
      <TextField
        variant="outlined"
        margin="normal"
        fullWidth
        className={classes.textField}
        label="ê°€ê²©"
        value={price}
        onChange={e => setPrice(e.target.value)}
        InputProps={{
          endAdornment: <InputAdornment position="end">ì›</InputAdornment>
        }}
      />
      <br />
      <TextField
        variant="outlined"
        margin="normal"
        fullWidth
        className={classes.textField}
        label="êµ¬ì…ì²˜"
        value={place}
        onChange={e => setPlace(e.target.value)}
      />
      <br />
      <Button
        onClick={() => handleAdd()}
        variant="contained"
        color="primary"
        fullWidth
        className={classes.button}
      >
        ì¶”ê°€
      </Button>
    </Wrapper>
  );
}
```

ì–´ì©Œë‹¤ë³´ë‹ˆ ì½”ë“œê°€ êµ‰ì¥íˆ ê¸¸ê³  ì§€ì €ë¶„í•´ì¡Œë‹¤...ğŸ˜±

ê·¸ë¦¬ê³  í™”ë©´ì„ ë°˜ë°˜ ë‚˜ëˆ„ê¸° ìœ„í•´ ì•½ê°„ì˜ cssì‘ì—…ì„ í•´ì£¼ì—ˆë‹¤.

**src/App.tsx**

```tsx
(...ìƒëµ)
const Container = styled.div`
  display: flex;
`;
(...ìƒëµ)
```

App ì»´í¬ë„ŒíŠ¸ë¥¼ `Container`ë¡œ ê°ì‹¸ì£¼ê³ 

**src/Household.tsx**

```tsx
import React from "react";
import styled from "styled-components";

const Wrapper = styled.div`
  flex: 1;
`;

const HouseholdTable = styled.table`
  width: 100%;
`;

type HouseholdProps = {
  children: JSX.Element[];
};

export default function Household({ children }: HouseholdProps) {
  return (
    <Wrapper>
      <HouseholdTable>
        <caption>ê°€ê³„ë¶€</caption>
        {children}
      </HouseholdTable>
    </Wrapper>
  );
}
```

`Household`ì™€ `Form`ì˜ Wrapperì— `flex: 1` ì†ì„±ì„ ì£¼ë©´ í™”ë©´ì´ ë°˜ë°˜ ê½‰ ì°¨ê²Œ ë‚˜ì˜¨ë‹¤.

> ì—¬ê¸°ì„œ 1ì€ ë¹„ìœ¨ì´ë‹¤. (1:1)

![view4](/assets/images/report-household-view4.png)

ì˜¤ëŠ˜ ë‚ ì§œë¡œ í•­ëª©ì„ í•˜ë‚˜ ì¶”ê°€í•´ë³´ì•˜ë‹¤. ì•„ì£¼ ì˜ ë‚˜ì˜¨ë‹¤!

## ì‚­ì œ ê¸°ëŠ¥ ë§Œë“¤ê¸°

ì¶”ê°€ë¥¼ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ë‹¹ì—°íˆ ì‚­ì œë„ ë§Œë“¤ì–´ì•¼ê² ì§€.

ì‚­ì œ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ë ¤ë‹ˆ ë°œê²¬í•œê±´ë° `data`ì— `id`ê°€ ì—†ë‹¤?!

ê·€ì°®ì§€ë§Œ `data.json`ì— `id`ë¥¼ ë¶€ì—¬í•˜ê³  ì½”ë“œë¥¼ ì¡°ê¸ˆ ìˆ˜ì •í•´ì£¼ì.

**src/lib/data.json**

```json
{
  "data": [
    {
      "date": "20191202",
      "income": 200000,
      "expenses": [
        {
          "id": 1,
          "name": "ë³¼íœ",
          "price": 1000,
          "place": "ì¸í•˜ë¬¸êµ¬"
        },
        {
          "id": 2,
          "name": "ì‹œê³„",
          "price": 100000,
          "place": "ì¸í•˜ê¸ˆë°©"
        },
        {
          "id": 3,
          "name": "ì±…",
          "price": 10000,
          "place": "ê³µë£¡ì„œì "
        },
        {
          "id": 4,
          "name": "ë…¸íŠ¸",
          "price": 10000,
          "place": "ì¸í•˜ë¬¸êµ¬"
        }
      ]
    },
    {
      "date": "20191201",
      "income": 300000,
      "expenses": [
        {
          "id": 5,
          "name": "ìš°ìœ ",
          "price": 6000,
          "place": "ì¸í•˜ìŠˆí¼"
        },
        {
          "id": 6,
          "name": "ê³¼ì",
          "price": 10000,
          "place": "ì¸í•˜ìŠˆí¼"
        },
        {
          "id": 7,
          "name": "ì½œë¼",
          "price": 1500,
          "place": "ì¸í•˜ìŠˆí¼"
        }
      ]
    },

    {
      "date": "20191203",
      "income": 2000000,
      "expenses": [
        {
          "id": 8,
          "name": "ì¸í˜•",
          "price": 10000,
          "place": "ì¸í•˜ìŠˆí¼"
        },
        {
          "id": 9,
          "name": "ê»Œ",
          "price": 100,
          "place": "ì¸í•˜ìŠˆí¼"
        },
        {
          "id": 10,
          "name": "CD",
          "price": 5000,
          "place": "ì‹ ë‚˜ë¼ë ˆì½”ë“œ"
        },
        {
          "id": 11,
          "name": "ëª¨ë‹ˆí„°",
          "price": 105000,
          "place": "ì»´í“¨í„°ì„¸ìƒ"
        },
        {
          "id": 12,
          "name": "ë¹µ",
          "price": 1000,
          "place": "ë¹µì‹œì¥"
        },
        {
          "id": 13,
          "name": "ì½©ë‚˜ë¬¼",
          "price": 1000,
          "place": "ë™ë„¤ìŠˆí¼"
        },
        {
          "id": 14,
          "name": "ì»´í“¨í„°",
          "price": 2000000,
          "place": "ì»´í“¨í„°ì„¸ìƒ"
        }
      ]
    }
  ]
}
```

**src/App.tsx**

```tsx
import React, { useState } from "react";
import { data as initialData } from "./lib/data.json";
import styled from "styled-components";

// components
import Household from "./components/Household";
import Daily from "./components/Daily";
import Expense from "./components/Expense";
import Form from "./components/Form";

const Container = styled.div`
  display: flex;
`;

function App() {
  const [data, setData] = useState(initialData);

  const sortedData = data
    .sort((a, b) => {
      // ë‚ ì§œë³„ ì •ë ¬
      if (a.date > b.date) return 1;
      else if (b.date > a.date) return -1;
      else return 0;
    })
    .map(daily => {
      const sortedExpenses = daily.expenses.sort((a, b) => {
        // êµ¬ì…ì²˜ë³„ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        if (a.place > b.place) return -1;
        else if (b.place > a.place) return 1;
        else return 0;
      });
      return {
        ...daily,
        expenses: sortedExpenses
      };
    });

  return (
    <Container>
      <Household>
        {sortedData.map((daily, idx) => (
          <Daily
            key={idx}
            index={idx + 1}
            date={daily.date}
            income={daily.income}
            total={daily.expenses.reduce((acc, cur) => acc + cur.price, 0)}
          >
            {daily.expenses.map((expense, idx) => (
              <Expense
                key={idx}
                id={expense.id}
                index={idx + 1}
                name={expense.name}
                price={expense.price}
                place={expense.place}
              />
            ))}
          </Daily>
        ))}
      </Household>
      <Form data={data} setData={setData} />
    </Container>
  );
}

export default App;
```

**src/components/Expense.tsx**

```tsx
import React from "react";
import styled from "styled-components";
import formatRoman from "../lib/formatRoman";
import formatMoney from "../lib/formatMoney";

const YellowTd = styled.td`
  background: #ffff00;
  color: #000000;
  text-align: ${props => props.align};
`;

type ExpenseProps = {
  id: number;
  index: number;
  name: string;
  price: number;
  place: string;
};

export default function Expense({
  id,
  index,
  name,
  price,
  place
}: ExpenseProps) {
  return (
    <tr>
      <YellowTd align="center">{formatRoman(index)}.</YellowTd>
      <YellowTd align="left">{name}</YellowTd>
      <YellowTd align="left">{formatMoney(price)}</YellowTd>
      <YellowTd align="left">{place}</YellowTd>
    </tr>
  );
}
```

`Form.tsx`ì—ì„œ ì¶”ê°€í•  ë•Œ `id`ë„ ê°™ì´ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤. `id`ì¤‘ maxê°’ì„ ë½‘ì•„ `+1` í•´ì¤€ë‹¤.

**src/components/Form.tsx**

```tsx
(...ìƒëµ)
const maxId = data.reduce((acc, daily) => {
  const maxDailyId = daily.expenses.reduce(
    (acc, expense) => (expense.id > acc ? expense.id : acc),
    0
  );
  return acc > maxDailyId ? acc : maxDailyId;
}, 0);

if (selectDataIndex === -1) {
  setData([
    ...data,
    {
      date: strDate,
      income: 0,
      expenses: [
        {
          id: maxId + 1,
          name,
          price: Number(price),
          place
        }
      ]
    }
  ]);
} else {
  const filteredData = data.filter(daily => daily.date !== strDate);
  const selectData = data[selectDataIndex];
  selectData.expenses.push({
    id: maxId + 1,
    name,
    price: Number(price),
    place
  });
  setData([...filteredData, selectData]);
}
(...ìƒëµ)
```

ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ì‚­ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë³´ì.

ì§€ì¶œ í’ˆëª© í–‰ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ <span style="color: red">&times;</span> ë²„íŠ¼ì´ ë‚˜ì™€ì•¼í•œë‹¤.

ê·¸ë¦¬ê³  ì´ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì‚­ì œë˜ì–´ì•¼í•œë‹¤.

**src/components/Expense.tsx**

```tsx
import React from "react";
import styled from "styled-components";
import formatRoman from "../lib/formatRoman";
import formatMoney from "../lib/formatMoney";

const Wrapper = styled.tr``;

const RemoveButton = styled.div`
  color: #ff0000;
  float: right;
  margin: 0;
  padding: 0;
  cursor: pointer;
  display: none;
  ${Wrapper}:hover & {
    display: block;
  }
`;

const YellowTd = styled.td`
  background: #ffff00;
  color: #000000;
  text-align: ${props => props.align};
`;

type ExpenseProps = {
  id: number;
  index: number;
  name: string;
  price: number;
  place: string;
  onRemove: (id: number) => void;
};

export default function Expense({
  id,
  index,
  name,
  price,
  place,
  onRemove
}: ExpenseProps) {
  return (
    <Wrapper>
      <YellowTd align="center">{formatRoman(index)}.</YellowTd>
      <YellowTd align="left">{name}</YellowTd>
      <YellowTd align="left">{formatMoney(price)}</YellowTd>
      <YellowTd align="left">
        {place}
        <RemoveButton onClick={() => onRemove(id)}>&times;</RemoveButton>
      </YellowTd>
    </Wrapper>
  );
}
```

`onRemove`ë¥¼ ë°›ì•„ì„œ ë²„íŠ¼ì— ê±¸ì–´ì¤¬ëŠ”ë° ì´ í•¨ìˆ˜ëŠ” `App.tsx`ì—ì„œ ë§Œë“¤ê±°ë‹¤.

**src/App.tsx**

```tsx
(...ìƒëµ)

const handleRemove = (id: number): void => {
    const removedData = data.map(daily => {
      return {
        ...daily,
        expenses: daily.expenses.filter(expense => expense.id !== id)
      };
    });
    setData(removedData);
  };

(...ìƒëµ)

<Expense
  key={idx}
  id={expense.id}
  index={idx + 1}
  name={expense.name}
  price={expense.price}
  place={expense.place}
  onRemove={handleRemove}
/>

(...ìƒëµ)
```

![view5](/assets/images/report-household-view5.gif)

ì´ë ‡ê²Œ ì‚­ì œ ê¸°ëŠ¥ì„ êµ¬í˜„í–ˆë‹¤! ğŸ‘ğŸ‘ğŸ‘ (~~ì»´í“¨í„°ë§Œ ì•ˆì‚¬ë©´ ì ìë‚  ì¼ ì—†ë‹¤.~~)

## ìˆ˜ì… ìˆ˜ì •í•˜ê¸° ê¸°ëŠ¥ ë§Œë“¤ê¸°

ì´ì œ ë§Œë“¤ ê¸°ëŠ¥ì€ ìˆ˜ì…ì„ ìˆ˜ì •í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.

ê³„íšì—ëŠ” ì—†ì—ˆëŠ”ë° ì¶”ê°€ ê¸°ëŠ¥ ë§Œë“¤ ë•Œ ì•„ì§ ì‘ì„±ë˜ì§€ ì•Šì€ ë‚ ì§œì— ì¶”ê°€í•˜ë©´ ìˆ˜ì…ì„ ë”°ë¡œ ì£¼ê¸°ê°€ ì• ë§¤í•´ì„œ ê·¸ëƒ¥ 0ì›ìœ¼ë¡œ ë§Œë“¤ê³  ìˆ˜ì •í•˜ê¸° ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ì•¼ê² ë‹¤ ìƒê°í–ˆë‹¤.

ì‚­ì œ ë²„íŠ¼ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ìˆ˜ì… ê¸ˆì•¡ë€ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìˆ˜ì • ë²„íŠ¼ì´ ë‚˜ì˜¤ê²Œ í•  ê²ƒ ì´ë‹¤. ìˆ˜ì • ë²„íŠ¼ì€ `material-icon`ì—ì„œ ê°€ì ¸ë‹¤ ì¼ë‹¤.

```bash
$ yarn add @material-ui/icon
```

ë¨¼ì € `@material-ui/icon`ë¥¼ ì„¤ì¹˜í•´ì£¼ê³  [material.io](https://material.io/resources/icons/)ì— ê°€ì„œ ë§ˆìŒì— ë“œëŠ” ì•„ì´ì½˜ì„ ì°¾ì•„ì¤€ë‹¤.

ë‚˜ëŠ” `edit`ë¼ëŠ” ì—°í•„ ëª¨ì–‘ ì•„ì´ì½˜ì„ ì„ íƒí–ˆë‹¤.

**src/components/Daily.tsx**

```tsx
import React, { useState } from "react";
import styled from "styled-components";
import formatDate from "../lib/formatDate";
import formatMoney from "../lib/formatMoney";
import EditIcon from "@material-ui/icons/Edit";

const IndexTd = styled.td`
  background: #0000ff;
  color: #ffffff;
  text-align: center;
`;

const ModifyButton = styled.div`
  font-size: 1rem;
  float: right;
  display: none;
  cursor: pointer;
`;

const GreenTd = styled.td`
  background: #00ff00;
  color: #000000;
  text-align: ${props => props.align};
  :hover ${ModifyButton} {
    display: block;
  }
`;

type LimeTdPropsType = {
  minus?: boolean;
};

const LimeTd = styled.td<LimeTdPropsType>`
  background: #a3dd08;
  color: ${props => (props.minus ? "#FF0000" : "#000000")};
  text-align: ${props => props.align};
`;

const IncomeTextField = styled.input`
  border: none;
  background: transparent;
  width: 100%;
  font-size: 1rem;
`;

type DailyProps = {
  index: number;
  date: string;
  income: number;
  total: number;
  children: JSX.Element[];
  modify: boolean;
  setModify: (modify: number) => void;
  onModify: (index: number, income: number) => void;
};

export default function Daily({
  index,
  date,
  income,
  total,
  children,
  modify,
  setModify,
  onModify
}: DailyProps) {
  const [incomeValue, setIncomeValue] = useState(String(income));
  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (
      e.keyCode === 69 ||
      e.keyCode === 190 ||
      e.keyCode === 109 ||
      e.keyCode === 189
    ) {
      e.preventDefault();
    }
    if (e.key === "Enter") {
      onModify(index, Number(incomeValue));
      setModify(0);
    }
  };
  return (
    <tbody>
      <tr>
        <IndexTd rowSpan={children.length + 5}>{index}</IndexTd>
        <GreenTd align="center">ë‚ ì§œ:{formatDate(date)}</GreenTd>
        <GreenTd align="center">ìˆ˜ì…</GreenTd>
        <GreenTd align="left" colSpan={2}>
          {modify ? (
            <IncomeTextField
              value={incomeValue}
              type="number"
              onChange={e => setIncomeValue(e.target.value)}
              onKeyDown={handleKeyDown}
              autoFocus
            />
          ) : (
            <>
              {formatMoney(income)}{" "}
              <ModifyButton onClick={() => setModify(index)}>
                <EditIcon style={{ fontSize: 14 }} />
              </ModifyButton>
            </>
          )}
        </GreenTd>
      </tr>
      <tr>
        <GreenTd align="center">ë²ˆí˜¸</GreenTd>
        <GreenTd align="center">í’ˆëª©</GreenTd>
        <GreenTd align="center">ê°€ê²©</GreenTd>
        <GreenTd align="center">êµ¬ì…ì²˜</GreenTd>
      </tr>
      {children}
      <tr>
        <LimeTd align="center">ê°œìˆ˜</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {children.length}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì´ì§€ì¶œ</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {formatMoney(total)}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì”ì•¡</LimeTd>
        <LimeTd align="left" colSpan={3} minus={income < total}>
          {income < total ? "[ì ì]" : null}
          {formatMoney(income - total)}
        </LimeTd>
      </tr>
    </tbody>
  );
}
```

`App`ì—ì„œ `modify`, `setModify`, `onModify` ì´ë ‡ê²Œ ì„¸ `props`ë¥¼ ì¶”ê°€ë¡œ ë°›ì•„ì„œ ì‚¬ìš©í•˜ì˜€ë‹¤. ì´ ë¶€ë¶„ì€ ì´ì œ `App`ìœ¼ë¡œ ê°€ì„œ ì¶”ê°€í•´ì£¼ì.

```tsx
import React, { useState } from "react";
import { data as initialData } from "./lib/data.json";
import styled from "styled-components";

// components
import Household from "./components/Household";
import Daily from "./components/Daily";
import Expense from "./components/Expense";
import Form from "./components/Form";

const Container = styled.div`
  display: flex;
`;

function App() {
  const [data, setData] = useState(initialData);
  const [modify, setModify] = useState();

  const sortedData = data
    .sort((a, b) => {
      // ë‚ ì§œë³„ ì •ë ¬
      if (a.date > b.date) return 1;
      else if (b.date > a.date) return -1;
      else return 0;
    })
    .map(daily => {
      const sortedExpenses = daily.expenses.sort((a, b) => {
        // êµ¬ì…ì²˜ë³„ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        if (a.place > b.place) return -1;
        else if (b.place > a.place) return 1;
        else return 0;
      });
      return {
        ...daily,
        expenses: sortedExpenses
      };
    });

  const handleRemove = (id: number): void => {
    const removedData = data.map(daily => {
      return {
        ...daily,
        expenses: daily.expenses.filter(expense => expense.id !== id)
      };
    });
    setData(removedData);
  };

  const handleModify = (index: number, income: number): void => {
    const modifiedData = data.map((daily, idx) =>
      idx !== index - 1
        ? daily
        : {
            ...daily,
            income
          }
    );
    setData(modifiedData);
  };

  return (
    <Container>
      <Household>
        {sortedData.map((daily, idx) => (
          <Daily
            key={idx}
            index={idx + 1}
            date={daily.date}
            income={daily.income}
            total={daily.expenses.reduce((acc, cur) => acc + cur.price, 0)}
            modify={modify === idx + 1}
            setModify={setModify}
            onModify={handleModify}
          >
            {daily.expenses.map((expense, idx) => (
              <Expense
                key={idx}
                id={expense.id}
                index={idx + 1}
                name={expense.name}
                price={expense.price}
                place={expense.place}
                onRemove={handleRemove}
              />
            ))}
          </Daily>
        ))}
      </Household>
      <Form data={data} setData={setData} />
    </Container>
  );
}

export default App;
```

ì´ë ‡ê²Œ `handleModify`í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ìˆ˜ì •í•˜ê¸° ê¸°ëŠ¥ì„ ì™„ì„±í•˜ì˜€ë‹¤.

![view6](/assets/images/report-household-view6.gif)

ê²°ê³¼ê°€ ë§Œì¡±ìŠ¤ëŸ½ê²Œ ë‚˜ì˜¨ë‹¤. (~~ìˆ˜ì…ì´ ì§„ì§œ ì €ëŸ¬ë©´ ì§„ì§œ ë§Œì¡±ìŠ¤ëŸ½ê² ë‹¤.~~)

## Local Storage ì‚¬ìš©í•˜ê¸°

ì•„ì§ì€ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë³€ê²½ëœ ë°ì´í„°ë“¤ì´ ëª¨ë‘ ì´ˆê¸°í™”ëœë‹¤. ì„œë²„ê°€ ìˆìœ¼ë©´ ì¢‹ê² ì§€ë§Œ ì„œë²„ê°€ ì—†ëŠ” í˜ì´ì§€ë‹ˆ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì´ìš©í•˜ì—¬ ë¸Œë¼ìš°ì €ì— ì €ì¥í•´ì£¼ê² ë‹¤.

`local storage`ì— `data`ê°€ ì¡´ì¬í•˜ë©´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì˜ `data`ë¡œ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ `data.json`ì—ì„œ ê°€ì ¸ì˜¨ `data`(ê¸°ë³¸ ê°’)ë¡œ ì‹œì‘í•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

ê·¸ë¦¬ê³  `data`ì˜ ì¶”ê°€, ì‚­ì œ, ìˆ˜ì •ì´ ìˆì„ ë•Œë§ˆë‹¤ `local storage`ì— ì €ì¥í•´ì¤€ë‹¤.

**src/App.tsx**

```tsx
import React, { useState } from "react";
import { data as initialData } from "./lib/data.json";
import styled from "styled-components";

// components
import Household from "./components/Household";
import Daily from "./components/Daily";
import Expense from "./components/Expense";
import Form from "./components/Form";

const Container = styled.div`
  display: flex;
`;

function App() {
  const localData = localStorage.getItem("data");
  type dataType = {
    date: string;
    income: number;
    expenses: {
      id: number;
      name: string;
      price: number;
      place: string;
    }[];
  }[];
  const getData: dataType = localData ? JSON.parse(localData) : initialData;
  const [data, setData] = useState(getData);
  const [modify, setModify] = useState();

  const sortedData = data
    .sort((a, b) => {
      // ë‚ ì§œë³„ ì •ë ¬
      if (a.date > b.date) return 1;
      else if (b.date > a.date) return -1;
      else return 0;
    })
    .map(daily => {
      const sortedExpenses = daily.expenses.sort((a, b) => {
        // êµ¬ì…ì²˜ë³„ ë‚´ë¦¼ì°¨ìˆœ ì •ë ¬
        if (a.place > b.place) return -1;
        else if (b.place > a.place) return 1;
        else return 0;
      });
      return {
        ...daily,
        expenses: sortedExpenses
      };
    });

  const handleRemove = (id: number): void => {
    const removedData = data.map(daily => {
      return {
        ...daily,
        expenses: daily.expenses.filter(expense => expense.id !== id)
      };
    });
    localStorage.setItem("data", JSON.stringify(removedData));
    setData(removedData);
  };

  const handleModify = (index: number, income: number): void => {
    const modifiedData = data.map((daily, idx) =>
      idx !== index - 1
        ? daily
        : {
            ...daily,
            income
          }
    );
    localStorage.setItem("data", JSON.stringify(modifiedData));
    setData(modifiedData);
  };

  return (
    <Container>
      <Household>
        {sortedData.map((daily, idx) => (
          <Daily
            key={idx}
            index={idx + 1}
            date={daily.date}
            income={daily.income}
            total={daily.expenses.reduce((acc, cur) => acc + cur.price, 0)}
            modify={modify === idx + 1}
            setModify={setModify}
            onModify={handleModify}
          >
            {daily.expenses.map((expense, idx) => (
              <Expense
                key={idx}
                id={expense.id}
                index={idx + 1}
                name={expense.name}
                price={expense.price}
                place={expense.place}
                onRemove={handleRemove}
              />
            ))}
          </Daily>
        ))}
      </Household>
      <Form data={data} setData={setData} />
    </Container>
  );
}

export default App;
```

**src/components/Daily.tsx**

```tsx
import React, { useState } from "react";
import styled from "styled-components";
import formatDate from "../lib/formatDate";
import formatMoney from "../lib/formatMoney";
import EditIcon from "@material-ui/icons/Edit";

const IndexTd = styled.td`
  background: #0000ff;
  color: #ffffff;
  text-align: center;
`;

const ModifyButton = styled.div`
  font-size: 1rem;
  float: right;
  display: none;
  cursor: pointer;
`;

const GreenTd = styled.td`
  background: #00ff00;
  color: #000000;
  text-align: ${props => props.align};
  :hover ${ModifyButton} {
    display: block;
  }
`;

type LimeTdPropsType = {
  minus?: boolean;
};

const LimeTd = styled.td<LimeTdPropsType>`
  background: #a3dd08;
  color: ${props => (props.minus ? "#FF0000" : "#000000")};
  text-align: ${props => props.align};
`;

const IncomeTextField = styled.input`
  border: none;
  background: transparent;
  width: 100%;
  font-size: 1rem;
`;

type DailyProps = {
  index: number;
  date: string;
  income: number;
  total: number;
  children: JSX.Element[];
  modify: boolean;
  setModify: (modify: number) => void;
  onModify: (index: number, income: number) => void;
};

export default function Daily({
  index,
  date,
  income,
  total,
  children,
  modify,
  setModify,
  onModify
}: DailyProps) {
  const [incomeValue, setIncomeValue] = useState(String(income));
  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {
    if (
      e.keyCode === 69 ||
      e.keyCode === 190 ||
      e.keyCode === 109 ||
      e.keyCode === 189
    ) {
      e.preventDefault();
    }
    if (e.key === "Enter") {
      onModify(index, Number(incomeValue));
      setModify(0);
    }
  };
  return (
    <tbody>
      <tr>
        <IndexTd rowSpan={children.length + 5}>{index}</IndexTd>
        <GreenTd align="center">ë‚ ì§œ:{formatDate(date)}</GreenTd>
        <GreenTd align="center">ìˆ˜ì…</GreenTd>
        <GreenTd align="left" colSpan={2}>
          {modify ? (
            <IncomeTextField
              value={incomeValue}
              type="number"
              onChange={e => setIncomeValue(e.target.value)}
              onKeyDown={handleKeyDown}
              autoFocus
            />
          ) : (
            <>
              {formatMoney(income)}
              <ModifyButton
                onClick={() => {
                  setIncomeValue(String(income));
                  setModify(index);
                }}
              >
                <EditIcon style={{ fontSize: 14 }} />
              </ModifyButton>
            </>
          )}
        </GreenTd>
      </tr>
      <tr>
        <GreenTd align="center">ë²ˆí˜¸</GreenTd>
        <GreenTd align="center">í’ˆëª©</GreenTd>
        <GreenTd align="center">ê°€ê²©</GreenTd>
        <GreenTd align="center">êµ¬ì…ì²˜</GreenTd>
      </tr>
      {children}
      <tr>
        <LimeTd align="center">ê°œìˆ˜</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {children.length}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì´ì§€ì¶œ</LimeTd>
        <LimeTd align="left" colSpan={3}>
          {formatMoney(total)}
        </LimeTd>
      </tr>
      <tr>
        <LimeTd align="center">ì”ì•¡</LimeTd>
        <LimeTd align="left" colSpan={3} minus={income < total}>
          {income < total ? "[ì ì]" : null}
          {formatMoney(income - total)}
        </LimeTd>
      </tr>
    </tbody>
  );
}
```

ì´ì œ ë°ì´í„°ë¥¼ ì¶”ê°€, ì‚­ì œ, ìˆ˜ì •ì„ í•˜ê³  ìƒˆë¡œê³ ì¹¨ì„ í•´ë„ ë°ì´í„°ê°€ ìœ ì§€ëœë‹¤!

![view7](/assets/images/report-household-view7.gif)

# í›„ê¸°

ì´ë ‡ê²Œ ë‚˜ì˜ ë¸”ë¡œê·¸ ì²« ê¸€ê³¼ ê³¼ì œë¥¼ ë§ˆì³¤ë‹¤. í™•ì‹¤íˆ í”„ë¡œì íŠ¸ë¥¼ ê¸€ì„ ì“°ë©° ê°™ì´ ì§„í–‰í•˜ë‹ˆ ì§„í–‰ ì†ë„ê°€ ì²´ê° 3ë°°ëŠ” ëŠ¦ì–´ì§€ëŠ” ë“¯ í–ˆë‹¤. ê³„íší•œ ê¸°ëŠ¥ì„ ëª¨ë‘ ë¬¸ì œì—†ì´ êµ¬í˜„í•˜ê¸°ëŠ” í–ˆì§€ë§Œ ì•„ì‰¬ìš´ ì ì´ ìƒë‹¹íˆ ë§ë‹¤.

## ì•„ì‰¬ìš´ ì 

1. ê¹”ë”í•˜ì§€ ì•Šì€ ì½”ë“œ
2. ê·¸ëŸ¬ë‹¤ë³´ë‹ˆ
3. ì ì ˆí•˜ì§€ ì•Šì€ ê¹ƒ ì»¤ë°‹ íƒ€ì´ë°ê³¼ ì»¤ë°‹ ë©”ì‹œì§€
4. ë¸”ë¡œê·¸ì— ê¸€ë³´ë‹¤ ì½”ë“œë§Œ ë„ˆë¬´ ë§ì•„ì§„ ì 
5. ë”ë”˜ ê°œë°œ ì†ë„

## ë§í¬

ê¹ƒí—ˆë¸Œ ì£¼ì†Œ: https://github.com/ChoJongHoon/household

ë°ëª¨ í˜ì´ì§€: https://chojonghoon.github.io/household
